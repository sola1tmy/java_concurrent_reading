# 对象的组合

###设计线程安全的类
- 通过封装可以在不对整个程序分析就可以判断一个类是否线程安全
- 设计线程安全类的三个基本要素
    - 找出构成对象状态的所有变量
    - 找出约束状态变量的不变性条件
    - 建立对象状态的并发访问管理策略
- 方法
    - 收集同步请求
    - 注意依赖状态的操作
    
### 实例封闭
- 优势
    - 封闭在一个实例中更容易检查
    - 可以通过实例封闭和加锁成为线程安全
- 策略
    - JAVA监视器模式：（监视器锁，另外如果使用私有锁对象加锁，可以防止客户代码无法获取到锁）

### 线程安全性的委托

###在现有的线程安全类添加功能
- 在现有类上修改（不一定能获取到源码）
- 继承修改（更脆弱）

### 额外知识点
- 分析类是否线程安全方法
    - 